@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  --color-stone-50: var(--stone-50);
  --color-stone-100: var(--stone-100);
  --color-stone-200: var(--stone-200);
  --color-stone-300: var(--stone-300);
  --color-stone-500: var(--stone-500);
  --color-stone-600: var(--stone-600);
  --color-stone-700: var(--stone-700);
  --color-stone-800: var(--stone-800);
  --color-stone-900: var(--stone-900);
  --color-stone-950: var(--stone-950);
  --color-orange-300: var(--orange-300);
  --color-orange-400: var(--orange-400);
  --color-orange-500: var(--orange-500);
  --color-orange-600: var(--orange-600);

  --color-x-blue: var(--x-blue);
  --color-x-bg: var(--x-bg);
  --color-x-card: var(--x-card);
  --color-x-border: var(--x-border);
  --color-x-text: var(--x-text);
  --color-x-text-secondary: var(--x-text-secondary);
  --color-x-hover: var(--x-hover);
  --color-x-link-card: var(--x-link-card);
  --color-x-reader-surface: var(--x-reader-surface);
  --color-x-reader-border: var(--x-reader-border);
  --color-x-success: var(--x-success);
  --color-pill-green-text: var(--pill-green-text);
  --color-pill-green-bg: var(--pill-green-bg);
  --color-pill-green-border: var(--pill-green-border);
  --color-pill-amber-text: var(--pill-amber-text);
  --color-pill-amber-bg: var(--pill-amber-bg);
  --color-pill-amber-border: var(--pill-amber-border);
  --color-pill-cyan-text: var(--pill-cyan-text);
  --color-pill-cyan-bg: var(--pill-cyan-bg);
  --color-pill-cyan-border: var(--pill-cyan-border);
  --color-pill-orange-text: var(--pill-orange-text);
  --color-pill-orange-bg: var(--pill-orange-bg);
  --color-pill-orange-border: var(--pill-orange-border);
}

@layer base {
  :root,
  [data-theme="light"] {
    --stone-50: #fafaf9;
    --stone-100: #f5f5f4;
    --stone-200: #e7e5e4;
    --stone-300: #d6d3d1;
    --stone-500: #78716c;
    --stone-600: #57534e;
    --stone-700: #44403c;
    --stone-800: #292524;
    --stone-900: #1c1917;
    --stone-950: #0c0a09;
    --orange-300: #fdba74;
    --orange-400: #fb923c;
    --orange-500: #f97316;
    --orange-600: #ea580c;

    --x-blue: #c2410c;
    --x-bg: var(--stone-50);
    --x-card: #ffffff;
    --x-border: var(--stone-200);
    --x-text: var(--stone-900);
    --x-text-secondary: var(--stone-700);
    --x-hover: var(--stone-100);
    --x-link-card: #f8f7f5;
    --sh-class: #2d5e9d;
    --sh-identifier: #354150;
    --sh-sign: #8996a3;
    --sh-property: #0550ae;
    --sh-entity: #249a97;
    --sh-jsxliterals: #6266d1;
    --sh-string: #00a99a;
    --sh-keyword: #cf222e;
    --sh-comment: #a19595;
    --x-reader-surface: #fdfcfb;
    --x-reader-border: var(--stone-200);
    --x-success: #15803d;
    --pill-green-text: #15803d;
    --pill-green-bg: rgba(34, 197, 94, 0.12);
    --pill-green-border: rgba(34, 197, 94, 0.30);
    --pill-amber-text: #b45309;
    --pill-amber-bg: rgba(245, 158, 11, 0.12);
    --pill-amber-border: rgba(245, 158, 11, 0.30);
    --pill-cyan-text: #0e7490;
    --pill-cyan-bg: rgba(6, 182, 212, 0.12);
    --pill-cyan-border: rgba(6, 182, 212, 0.30);
    --pill-orange-text: #c2410c;
    --pill-orange-bg: rgba(249, 115, 22, 0.12);
    --pill-orange-border: rgba(249, 115, 22, 0.30);
  }

  @media (prefers-color-scheme: dark) {
    :root:not([data-theme]) {
      --stone-50: #fafaf9;
      --stone-100: #f5f5f4;
      --stone-200: #e7e5e4;
      --stone-300: #d6d3d1;
      --stone-500: #a8a29e;
      --stone-600: #d6d3d1;
      --stone-700: #e7e5e4;
      --stone-800: #f5f5f4;
      --stone-900: #fafaf9;
      --stone-950: #111110;
      --orange-300: #f1a68c;
      --orange-400: #e07a5f;
      --orange-500: #cd7057;
      --orange-600: #bc634b;

      --x-blue: var(--orange-400);
      --x-bg: var(--stone-950);
      --x-card: #191816;
      --x-border: #2a2927;
      --x-text: rgba(255, 255, 255, 0.92);
      --x-text-secondary: rgba(255, 255, 255, 0.75);
      --x-hover: #232220;
      --x-link-card: #1d1c1a;
      --x-reader-surface: #171614;
      --x-reader-border: #2d2b29;
      --x-success: #22c55e;
      --sh-class: #8db9e2;
      --sh-identifier: #c9d1d9;
      --sh-sign: #768390;
      --sh-property: #79c0ff;
      --sh-entity: #56d4cf;
      --sh-jsxliterals: #a5a6f6;
      --sh-string: #a5d6ff;
      --sh-keyword: #f47067;
      --sh-comment: #636c76;
      --pill-green-text: #86efac;
      --pill-green-bg: rgba(34, 197, 94, 0.12);
      --pill-green-border: rgba(34, 197, 94, 0.30);
      --pill-amber-text: #fcd34d;
      --pill-amber-bg: rgba(245, 158, 11, 0.12);
      --pill-amber-border: rgba(245, 158, 11, 0.30);
      --pill-cyan-text: #67e8f9;
      --pill-cyan-bg: rgba(6, 182, 212, 0.12);
      --pill-cyan-border: rgba(6, 182, 212, 0.30);
      --pill-orange-text: #fdba74;
      --pill-orange-bg: rgba(249, 115, 22, 0.12);
      --pill-orange-border: rgba(249, 115, 22, 0.30);
    }
  }

  [data-theme="dark"] {
    --stone-50: #fafaf9;
    --stone-100: #f5f5f4;
    --stone-200: #e7e5e4;
    --stone-300: #d6d3d1;
    --stone-500: #a8a29e;
    --stone-600: #d6d3d1;
    --stone-700: #e7e5e4;
    --stone-800: #f5f5f4;
    --stone-900: #fafaf9;
    --stone-950: #111110;
    --orange-300: #f1a68c;
    --orange-400: #e07a5f;
    --orange-500: #cd7057;
    --orange-600: #bc634b;

    --x-blue: var(--orange-400);
    --x-bg: var(--stone-950);
    --x-card: #191816;
    --x-border: #2a2927;
    --x-text: rgba(255, 255, 255, 0.92);
    --x-text-secondary: rgba(255, 255, 255, 0.75);
    --x-hover: #232220;
    --x-link-card: #1d1c1a;
    --x-reader-surface: #171614;
    --x-reader-border: #2d2b29;
    --x-success: #22c55e;
    --sh-class: #8db9e2;
    --sh-identifier: #c9d1d9;
    --sh-sign: #768390;
    --sh-property: #79c0ff;
    --sh-entity: #56d4cf;
    --sh-jsxliterals: #a5a6f6;
    --sh-string: #a5d6ff;
    --sh-keyword: #f47067;
    --sh-comment: #636c76;
    --pill-green-text: #86efac;
    --pill-green-bg: rgba(34, 197, 94, 0.12);
    --pill-green-border: rgba(34, 197, 94, 0.30);
    --pill-amber-text: #fcd34d;
    --pill-amber-bg: rgba(245, 158, 11, 0.12);
    --pill-amber-border: rgba(245, 158, 11, 0.30);
    --pill-cyan-text: #67e8f9;
    --pill-cyan-bg: rgba(6, 182, 212, 0.12);
    --pill-cyan-border: rgba(6, 182, 212, 0.30);
    --pill-orange-text: #fdba74;
    --pill-orange-bg: rgba(249, 115, 22, 0.12);
    --pill-orange-border: rgba(249, 115, 22, 0.30);
  }

  html,
  body,
  #root {
    @apply min-h-dvh;
  }

  body {
    @apply bg-x-bg text-x-text antialiased;
    text-rendering: optimizeLegibility;
    font-family:
      "Avenir Next", "Avenir", "Segoe UI", "Helvetica Neue", Helvetica,
      sans-serif;
  }

  .home-display {
    font-family:
      "Iowan Old Style", "Palatino Linotype", "Book Antiqua", Palatino, serif;
  }

  ::selection {
    background-color: color-mix(in srgb, var(--x-blue) 28%, transparent);
  }

  /* Scroll offset for ToC anchor targets */
  [id^="section-"] {
    scroll-margin-top: 5rem;
  }

  .reader-heading {
    scroll-margin-top: 5rem;
  }
}

@utility prose-reader {
  --tw-prose-body: var(--x-text);
  --tw-prose-headings: var(--x-text);
  --tw-prose-lead: var(--x-text-secondary);
  --tw-prose-links: var(--x-blue);
  --tw-prose-bold: var(--x-text);
  --tw-prose-counters: var(--x-text-secondary);
  --tw-prose-bullets: var(--x-text-secondary);
  --tw-prose-hr: var(--x-border);
  --tw-prose-quotes: var(--x-text);
  --tw-prose-quote-borders: var(--x-border);
  --tw-prose-captions: var(--x-text-secondary);
  --tw-prose-code: var(--x-text);
  --tw-prose-pre-code: var(--x-text);
  --tw-prose-pre-bg: var(--x-card);
  --tw-prose-th-borders: var(--x-border);
  --tw-prose-td-borders: var(--x-border);
}

.breath-home {
  --motion-fast: 150ms;
  --motion-standard: 200ms;
  --motion-slow: 260ms;
  --motion-ease-enter: cubic-bezier(0.215, 0.61, 0.355, 1);
  --motion-ease-move: cubic-bezier(0.645, 0.045, 0.355, 1);
  --motion-ease-hover: ease;

  --breath-bg: var(--x-bg);
  --breath-surface: linear-gradient(
    145deg,
    rgba(34, 30, 28, 0.82),
    rgba(22, 20, 18, 0.8)
  );
  --breath-surface-hover: linear-gradient(
    145deg,
    rgba(42, 36, 33, 0.9),
    rgba(28, 25, 23, 0.88)
  );
  --breath-border: rgba(224, 122, 95, 0.16);
  --breath-border-strong: rgba(224, 122, 95, 0.3);
  --breath-text-primary: rgba(255, 255, 255, 0.92);
  --breath-text-secondary: rgba(255, 255, 255, 0.86);
  --breath-text-muted: rgba(255, 255, 255, 0.62);
  --breath-text-ghost: rgba(255, 255, 255, 0.56);
  --breath-accent: #e07a5f;
  --breath-accent-muted: rgba(224, 122, 95, 0.78);
  --breath-accent-bg: rgba(224, 122, 95, 0.12);
  background: var(--breath-bg);
  color: var(--breath-text-primary);
  font-family:
    "DM Sans", "Avenir Next", "Avenir", "Segoe UI", "Helvetica Neue",
    Helvetica, sans-serif;
}

.breath-wallpaper {
  transition: opacity var(--motion-slow) var(--motion-ease-enter);
  filter: brightness(0.72);
}

.breath-ambient {
  background:
    radial-gradient(ellipse 80% 70% at 50% 45%, transparent 30%, rgba(0, 0, 0, 0.45) 100%),
    linear-gradient(to top, rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0.15) 40%, transparent 70%),
    linear-gradient(180deg, rgba(224, 122, 95, 0.03) 0%, rgba(224, 122, 95, 0.02) 100%);
}

.breath-grain {
  opacity: 0.18;
  mix-blend-mode: overlay;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 200px 200px;
}

.breath-clock,
.breath-title {
  font-family:
    "Spectral", "Iowan Old Style", "Palatino Linotype", Georgia,
    serif;
}

.breath-clock {
  color: var(--breath-text-primary);
  font-size: clamp(2.4rem, 7vw, 4.2rem);
  font-weight: 300;
  letter-spacing: -0.04em;
  line-height: 1;
}

.breath-icon-btn {
  border: 1px solid var(--breath-border);
  border-radius: 9999px;
  color: var(--breath-text-muted);
  background: rgba(255, 255, 255, 0.02);
  padding: 0.46rem;
  transition:
    border-color var(--motion-fast) var(--motion-ease-hover),
    color var(--motion-fast) var(--motion-ease-hover),
    background-color var(--motion-fast) var(--motion-ease-hover);
}

.breath-card {
  border: 1px solid var(--breath-border);
  border-radius: 1.1rem;
  background: var(--breath-surface);
  backdrop-filter: blur(1px);
}

.breath-card {
  position: relative;
  overflow: hidden;
  padding: 0.86rem 1rem 0.72rem;
  min-height: 8.5rem;
  transition:
    border-color var(--motion-fast) var(--motion-ease-hover),
    background-color var(--motion-fast) var(--motion-ease-hover);
}

.breath-card--zen {
  min-height: 8.9rem;
  cursor: pointer;
}

.breath-card.is-engaged {
  border-color: var(--breath-border-strong);
  background: var(--breath-surface-hover);
}

.breath-progress-track {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 2px;
  background: rgba(255, 255, 255, 0.04);
  overflow: hidden;
}

.breath-progress-fill {
  display: block;
  width: 100%;
  height: 100%;
  transform-origin: left center;
  transform: scaleX(0);
  transition: none;
  background: linear-gradient(
    90deg,
    rgba(224, 122, 95, 0.68),
    rgba(224, 122, 95, 0.22)
  );
}

.breath-progress-fill.is-animating {
  animation: breath-progress-sweep 30s linear forwards;
}

@keyframes breath-progress-sweep {
  from { transform: scaleX(0); }
  to { transform: scaleX(1); }
}

.breath-card-content {
  min-height: 7rem;
  transform: translateY(0);
  opacity: 1;
  transition:
    transform var(--motion-standard) var(--motion-ease-enter),
    opacity var(--motion-standard) var(--motion-ease-enter);
}

.breath-card-content--leaving {
  transform: translateY(4px);
  opacity: 0;
}

.breath-eyebrow {
  color: var(--breath-accent-muted);
  font-size: 0.68rem;
  font-weight: 600;
  letter-spacing: 0.26em;
  text-transform: uppercase;
}

.breath-title {
  color: var(--breath-text-secondary);
  font-size: clamp(0.96rem, 1.8vw, 1.16rem);
  line-height: 1.28;
  font-weight: 400;
  min-height: calc(1.28em * 2);
  display: -webkit-box;
  overflow: hidden;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.breath-description {
  color: rgba(255, 255, 255, 0.74);
  font-size: 0.76rem;
  line-height: 1.48;
  min-height: calc(1.48em * 1);
  display: -webkit-box;
  overflow: hidden;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
}

.breath-meta {
  color: var(--breath-text-muted);
  font-size: 0.72rem;
  line-height: 1.2;
}

.breath-dot {
  position: relative;
  width: 2.5rem;
  height: 2.25rem;
  border: none;
  border-radius: 9999px;
  background: transparent;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transform: translateY(0);
  transition:
    transform var(--motion-fast) var(--motion-ease-enter),
    opacity var(--motion-fast) var(--motion-ease-hover);
}

.breath-dot::before {
  content: "";
  position: absolute;
  inset: 0.52rem 0.42rem;
  border-radius: 9999px;
  background: rgba(255, 255, 255, 0.06);
  opacity: 0;
  transform: scaleX(0.72);
  transition:
    opacity var(--motion-fast) var(--motion-ease-hover),
    transform var(--motion-fast) var(--motion-ease-enter),
    background-color var(--motion-fast) var(--motion-ease-hover);
}

.breath-dot-visual {
  position: relative;
  z-index: 1;
  width: 0.92rem;
  height: 0.26rem;
  border-radius: 9999px;
  transform: scaleX(0.35);
  transform-origin: center;
  opacity: 0.78;
  background: rgba(255, 255, 255, 0.2);
  transition:
    transform var(--motion-fast) var(--motion-ease-enter),
    opacity var(--motion-fast) var(--motion-ease-hover),
    background-color var(--motion-fast) var(--motion-ease-hover);
}

.breath-dot.is-active {
  opacity: 1;
}

.breath-dot.is-active::before {
  opacity: 1;
  transform: scaleX(1);
  background: rgba(224, 122, 95, 0.18);
}

.breath-dot.is-active .breath-dot-visual {
  transform: scaleX(1);
  opacity: 1;
  background: var(--breath-accent);
}

.breath-dots-row {
  margin-top: 0.16rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.16rem;
}

.breath-actions {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.65rem;
}

.breath-link {
  border: none;
  background: none;
  color: var(--breath-text-ghost);
  font-size: 0.72rem;
  cursor: pointer;
  transition: color var(--motion-fast) var(--motion-ease-hover);
}

.breath-divider {
  color: rgba(255, 255, 255, 0.14);
}

.breath-btn {
  border-radius: 0.62rem;
  font-size: 0.79rem;
  font-weight: 600;
  line-height: 1;
  cursor: pointer;
  transition:
    opacity var(--motion-fast) var(--motion-ease-hover),
    color var(--motion-fast) var(--motion-ease-hover),
    border-color var(--motion-fast) var(--motion-ease-hover),
    background-color var(--motion-fast) var(--motion-ease-hover);
}

.breath-btn:disabled {
  opacity: 0.56;
  cursor: default;
}

.breath-btn--primary {
  border: none;
  background: var(--breath-accent);
  color: white;
  padding: 0.68rem 1.28rem;
}

.breath-btn--secondary {
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.62);
  padding: 0.68rem 1.28rem;
}

.breath-kbd {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.3em;
  margin-left: 0.5rem;
  padding: 0.2em 0.45em;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.14);
  font-family: inherit;
  font-size: 0.78em;
  font-weight: 500;
  line-height: 1;
  letter-spacing: 0.03em;
  color: rgba(255, 255, 255, 0.7);
}

.breath-btn--ghost {
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.04);
  color: rgba(255, 255, 255, 0.54);
  padding: 0.68rem 1rem;
}

.breath-btn--compact {
  font-size: 0.74rem;
  padding: 0.44rem 0.68rem;
}

.breath-empty {
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.95rem;
}

.breath-settings-btn {
  position: fixed;
  right: max(1rem, env(safe-area-inset-right));
  bottom: max(1rem, env(safe-area-inset-bottom));
  z-index: 20;
}

.breath-reading-btn {
  position: fixed;
  right: max(1rem, env(safe-area-inset-right));
  bottom: calc(max(1rem, env(safe-area-inset-bottom)) + 2.75rem);
  z-index: 20;
}

.breath-wallpaper-nav {
  position: fixed;
  left: max(1rem, env(safe-area-inset-left));
  bottom: max(1rem, env(safe-area-inset-bottom));
  display: flex;
  align-items: center;
  gap: 0.5rem;
  z-index: 20;
}

.breath-wallpaper-arrows {
  display: flex;
  align-items: center;
  gap: 0.15rem;
}

.breath-wallpaper-arrow {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 9999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.04);
  color: rgba(255, 255, 255, 0.5);
  cursor: pointer;
  transition:
    border-color var(--motion-fast) var(--motion-ease-hover),
    color var(--motion-fast) var(--motion-ease-hover),
    background-color var(--motion-fast) var(--motion-ease-hover);
}

.breath-wallpaper-arrow:disabled {
  opacity: 0.3;
  cursor: default;
}

.breath-wallpaper-label {
  max-width: min(38ch, 55vw);
  color: rgba(255, 255, 255, 0.46);
  font-size: 0.68rem;
  line-height: 1.3;
}

.breath-quick-link {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  text-decoration: none;
  transition: opacity var(--motion-fast) var(--motion-ease-hover);
}

.breath-quick-link-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 9999px;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  transition:
    background var(--motion-fast) var(--motion-ease-hover),
    border-color var(--motion-fast) var(--motion-ease-hover);
}

.breath-quick-link-icon img {
  border-radius: 2px;
}

.breath-quick-link-label {
  color: var(--breath-text-ghost);
  font-size: 0.62rem;
  max-width: 4.5rem;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: center;
}

@media (hover: hover) and (pointer: fine) {
  .breath-quick-link:hover .breath-quick-link-icon {
    background: rgba(255, 255, 255, 0.14);
    border-color: rgba(255, 255, 255, 0.18);
  }

  .breath-quick-link:hover .breath-quick-link-label {
    color: rgba(255, 255, 255, 0.7);
  }

  .breath-icon-btn:hover {
    border-color: var(--breath-border-strong);
    color: var(--breath-text-secondary);
    background: rgba(255, 255, 255, 0.04);
  }

  .breath-card:hover {
    border-color: var(--breath-border-strong);
    background: var(--breath-surface-hover);
  }

  .breath-dot:hover {
    transform: translateY(-1px);
  }

  .breath-dot:hover::before {
    opacity: 1;
    transform: scaleX(0.94);
  }

  .breath-dot:hover .breath-dot-visual {
    transform: scaleX(0.72);
    opacity: 1;
    background: rgba(255, 255, 255, 0.46);
  }

  .breath-dot.is-active:hover::before {
    transform: scaleX(1);
    background: rgba(224, 122, 95, 0.22);
  }

  .breath-dot.is-active:hover .breath-dot-visual {
    transform: scaleX(1);
    background: var(--breath-accent);
  }

  .breath-link:hover {
    color: rgba(255, 255, 255, 0.86);
  }

  .breath-btn--primary:hover:not(:disabled) {
    opacity: 0.9;
  }

  .breath-btn--secondary:hover:not(:disabled) {
    color: rgba(255, 255, 255, 0.88);
    border-color: rgba(255, 255, 255, 0.2);
  }

  .breath-btn--ghost:hover:not(:disabled) {
    color: rgba(255, 255, 255, 0.8);
    border-color: rgba(255, 255, 255, 0.2);
  }

  .breath-wallpaper-arrow:hover:not(:disabled) {
    border-color: rgba(255, 255, 255, 0.28);
    color: rgba(255, 255, 255, 0.8);
    background: rgba(255, 255, 255, 0.08);
  }
}

.breath-dot:active {
  transform: scale(0.98);
}

.breath-card:focus-visible,
.breath-dot:focus-visible,
.breath-link:focus-visible,
.breath-btn:focus-visible,
.breath-icon-btn:focus-visible {
  outline: 2px solid rgba(224, 122, 95, 0.82);
  outline-offset: 2px;
}

@media (max-width: 768px) {
  .breath-card {
    min-height: 8.4rem;
  }

  .breath-card-content {
    min-height: 6.8rem;
  }
}

@media (max-width: 480px) {
  .breath-card {
    padding: 0.82rem 0.9rem 0.78rem;
    min-height: 8.2rem;
  }

  .breath-title {
    font-size: 0.92rem;
  }

  .breath-card-content {
    min-height: 6.6rem;
  }

  .breath-actions {
    gap: 0.55rem;
  }
}

.lib-list-item {
  width: 100%;
  border: none;
  background: transparent;
  display: flex;
  align-items: center;
  gap: 0.95rem;
  padding: 0.78rem 0;
  cursor: pointer;
  transition: opacity var(--motion-fast, 150ms) ease;
  content-visibility: auto;
  contain-intrinsic-size: auto 3.5rem;
}

.lib-time-badge {
  min-width: 2rem;
  height: 2rem;
  border-radius: 0.5rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--x-blue);
  font-size: 0.75rem;
  font-weight: 600;
  background: color-mix(in srgb, var(--x-blue) 12%, transparent);
  flex-shrink: 0;
}

.lib-item-title {
  display: -webkit-box;
  overflow: hidden;
  color: var(--x-text);
  font-size: 1rem;
  line-height: 1.25;
  font-weight: 400;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  font-family:
    "Spectral", "Iowan Old Style", "Palatino Linotype", Georgia,
    serif;
}

.lib-item-meta {
  display: block;
  margin-top: 0.25rem;
  color: var(--x-text-secondary);
  font-size: 0.72rem;
  line-height: 1.2;
}

.lib-unbookmark-btn {
  flex-shrink: 0;
  border: none;
  background: none;
  color: var(--x-text-secondary);
  padding: 0.35rem;
  border-radius: 9999px;
  cursor: pointer;
  opacity: 0;
  transition:
    opacity 150ms ease,
    color 150ms ease;
}

.lib-list-item:hover .lib-unbookmark-btn,
.lib-list-item:focus-within .lib-unbookmark-btn {
  opacity: 1;
}

.lib-unbookmark-btn:hover {
  color: var(--x-text);
}

.lib-unbookmark-btn:disabled {
  opacity: 0.4;
  cursor: default;
}

@media (hover: hover) and (pointer: fine) {
  .lib-list-item:hover .lib-item-title {
    color: var(--x-blue);
  }
}

.lib-list-item:focus-visible {
  outline: 2px solid var(--x-blue);
  outline-offset: 2px;
}

@media (prefers-reduced-motion: reduce) {
  .breath-wallpaper,
  .breath-card-content,
  .breath-dot,
  .breath-dot::before,
  .breath-dot-visual,
  .breath-link,
  .breath-btn,
  .breath-icon-btn {
    transition: none;
  }
}
